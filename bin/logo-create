#!/usr/bin/env node

var fatal = require('../lib/utils').fatal;
var join = require('path').join;
var khaos = require('khaos');
var program = require('commander');
var rm = require('rimraf').sync;

/**
 * Program.
 */

program
  .usage('[directory]')
  .parse(process.argv);

/**
 * Settings.
 */

var dir = join(process.cwd(), program.args[0] || '.');
var template = join(__dirname, '../support/template');

/**
 * Khaos.
 */

khaos(template, dir, function(err, locals){
  if (!err) return;
  rm(dir);
  fatal(err);
});